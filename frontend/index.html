<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TJLPSRN2');</script>
<!-- End Google Tag Manager -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2007041343225724"
     crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>yakyuu.jp - NPB Statistics Database and Search Engine</title>
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="stylesheet" href="/style.css">
    <style>
        /* Homepage specific styles */
        
        /* Standings Section (from standings.html) */
        .standings-section {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .standings-section h2 {
            color: #BC002D;
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
            text-align: center;
        }
        
        .leagues-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }
        
        .league-standings {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 1.5rem;
        }
        
        .league-title {
            font-size: 1.2rem;
            font-weight: bold;
            color: #BC002D;
            margin-bottom: 1rem;
            text-align: center;
            border-bottom: 2px solid #BC002D;
            padding-bottom: 0.5rem;
        }
        
        .standings-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .standings-table th {
            background: #BC002D;
            color: white;
            padding: 0.75rem 0.5rem;
            text-align: center;
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .standings-table td {
            padding: 0.75rem 0.5rem;
            text-align: center;
            border-bottom: 1px solid #eee;
            font-size: 0.9rem;
        }
        
        .standings-table tbody tr:hover {
            background: #f8f9fa;
        }
        
        .team-name {
            color: #BC002D;
            text-decoration: none;
            font-weight: 500;
        }
        
        .team-name:hover {
            text-decoration: underline;
        }
        
        /* Remove underline for team names in game cards */
        .game-line-score .team-name:hover {
            text-decoration: none;
        }
        
        /* Season Selector */
        .season-selector {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .season-selector label {
            font-weight: 500;
            color: #333;
        }
        
        .season-selector select {
            padding: 0.5rem 1rem;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            background: white;
            color: #333;
            font-size: 1rem;
            cursor: pointer;
            transition: border-color 0.3s ease;
        }
        
        .season-selector select:hover {
            border-color: #BC002D;
        }
        
        .season-selector select:focus {
            outline: none;
            border-color: #BC002D;
            box-shadow: 0 0 0 3px rgba(188, 0, 45, 0.1);
        }
        
        /* Recent Games Section (from games.html) */
        .content-section {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .section-title {
            color: #BC002D;
            margin-bottom: 1rem;
            font-size: 1.5rem;
            text-align: center;
        }
        
        .section-description {
            text-align: center;
            color: #666;
            margin-bottom: 2rem;
        }
        
        #recent-games-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
        }
        
        /* Game Card Styles (from games.html) */
        .game-card {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            padding: 1rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .game-card:hover {
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
            transform: translateY(-2px);
        }
        
        .game-line-score {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }
        
        .game-line-score th {
            background: #f8f9fa;
            color: #333;
            padding: 0.5rem;
            text-align: center;
            font-weight: 600;
            border: 1px solid #e0e0e0;
        }
        
        .game-info-header {
            background: #BC002D !important;
            color: white !important;
            font-size: 0.8rem;
            padding: 0.75rem 0.5rem;
        }
        
        .game-line-score td {
            padding: 0.5rem;
            text-align: center;
            border: 1px solid #e0e0e0;
        }
        
        .game-line-score .team-name {
            text-align: left;
            font-weight: 600;
            color: #333;
        }
        
        .winning-score {
            background: #BC002D;
            color: white;
            font-weight: bold;
        }
        
        .loading-message, .error-message {
            text-align: center;
            padding: 2rem;
            color: #666;
        }
        
        .error-message {
            color: #dc3545;
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            border-radius: 8px;
        }
        
        /* Leaders Section (from players.html) */
        .leaders-section {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .leaders-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }
        
        .leaders-category {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 1.5rem;
        }
        
        .category-title {
            color: #BC002D;
            margin-bottom: 1.5rem;
            font-size: 1.2rem;
            text-align: center;
            border-bottom: 2px solid #BC002D;
            padding-bottom: 0.5rem;
        }
        
        .stat-boxes {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }
        
        .stat-box {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .stat-header {
            font-weight: bold;
            color: #BC002D;
            margin-bottom: 0.5rem;
            text-align: center;
            font-size: 0.9rem;
        }
        
        .stat-leaders {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .stat-leaders li {
            padding: 0.25rem 0;
            font-size: 0.8rem;
            color: #333;
        }
        
        .stat-leaders .loading {
            text-align: center;
            color: #666;
            font-style: italic;
        }
        
        .stat-leader {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        
        .stat-leader:hover {
            background-color: #f8f9fa;
        }
        
        .leader-name {
            font-weight: 500;
            color: #333;
        }
        
        .leader-stat {
            font-weight: bold;
            color: #BC002D;
        }
        
        /* Loading and Error States */
        .loading {
            text-align: center;
            padding: 2rem;
            color: #666;
        }
        
        .loading::after {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #BC002D;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            border: 1px solid #f5c6cb;
        }
        
        /* About Section */
        .about-section {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .about-section:hover {
            box-shadow: 0 8px 24px rgba(0,0,0,0.15);
            transform: translateY(-2px);
        }
        
        .about-content h2 {
            color: #BC002D;
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
            text-align: center;
        }
        
        .about-content p {
            color: #333;
            line-height: 1.6;
            margin-bottom: 1rem;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .leagues-container,
            .leaders-grid {
                grid-template-columns: 1fr;
            }
            
            .stat-boxes {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TJLPSRN2"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
    <!-- Large Header with Logo -->
    <header class="main-header">
        <div class="header-content">
            <a href="/" class="logo-link">
                <img src="/logo.png" alt="yakyuu.jp" class="logo-image">
            </a>
        </div>
    </header>

    <!-- Red Navigation Bar -->
    <nav class="main-nav">
        <div class="nav-content">
            <ul class="nav-menu">
                <li><a href="/games">Games</a></li>
                <li><a href="/players">Players</a></li>
                <li><a href="/teams">Teams/Standings</a></li>
                <li><a href="/ballparks">Ballparks</a></li>
                <li><a href="/advanced">Advanced Stat Finder</a></li>
                <li><a href="https://github.com/pluckhahn/yakyuu">Downloadable Data</a></li>
                <li><a href="/about">About</a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Hero Section -->
        <section class="hero-section">
            <div class="hero-content">
                <h1>Welcome to yakyuu.jp!</h1>
                <p>yakyuu.jp is a repository and search engine of Nippon Professional Baseball, containing complete game records,
                   advanced player statistics and splits, updated standings, and play-by-play data for every game since 2018.</p>
                <div class="hero-stats">
                    <div class="hero-stat">
                        <span class="stat-number">1500+</span>
                        <span class="stat-label">Players</span>
                    </div>
                    <div class="hero-stat">
                        <span class="stat-number">6000+</span>
                        <span class="stat-label">Games</span>
                    </div>
                    <div class="hero-stat">
                        <span class="stat-number">500,000+</span>
                        <span class="stat-label">Event Files</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Standings Section (from standings.html) -->
        <section class="standings-section">
            <h2>League Standings</h2>
            
            <div class="leagues-container">
                <!-- Central League -->
                <div class="league-standings">
                    <h3 class="league-title">Central League</h3>
                    <div id="central-standings-loading" class="loading">Loading standings...</div>
                    <div id="central-standings-error" class="error" style="display: none;"></div>
                    <table class="standings-table" id="central-standings-table" style="display: none;">
                        <thead>
                            <tr>
                                <th>Place</th>
                                <th>Team</th>
                                <th>G</th>
                                <th>W</th>
                                <th>L</th>
                                <th>T</th>
                                <th>WP</th>
                                <th>GB</th>
                            </tr>
                        </thead>
                        <tbody id="central-standings-body">
                        </tbody>
                    </table>
                </div>

                <!-- Pacific League -->
                <div class="league-standings">
                    <h3 class="league-title">Pacific League</h3>
                    <div id="pacific-standings-loading" class="loading">Loading standings...</div>
                    <div id="pacific-standings-error" class="error" style="display: none;"></div>
                    <table class="standings-table" id="pacific-standings-table" style="display: none;">
                        <thead>
                            <tr>
                                <th>Place</th>
                                <th>Team</th>
                                <th>G</th>
                                <th>W</th>
                                <th>L</th>
                                <th>T</th>
                                <th>WP</th>
                                <th>GB</th>
                            </tr>
                        </thead>
                        <tbody id="pacific-standings-body">
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Recent Games Section (from games.html) -->
        <div id="recent-games" class="content-section active">
            <h2 class="section-title">Recent Games</h2>
            
            <div id="recent-games-container">
                <!-- Games will be loaded here as individual cards -->
            </div>
            
            <div id="recent-games-loading" class="loading-message" style="display: none;">
                Loading games...
            </div>
            
            <div id="recent-games-error" class="error-message" style="display: none;">
                Failed to load games.
            </div>
        </div>

        <!-- League Leaders Section (from players.html) -->
        <section class="leaders-section">
            <div class="leaders-grid">
                <!-- Batting Leaders -->
                <div class="leaders-category">
                    <h2 class="category-title">Batting Leaders</h2>
                    <div class="stat-boxes">
                        <div class="stat-box">
                            <div class="stat-header">Batting Average</div>
                            <ul class="stat-leaders" id="avgLeaders">
                                <li class="loading">Loading...</li>
                            </ul>
                        </div>
                        <div class="stat-box">
                            <div class="stat-header">Hits</div>
                            <ul class="stat-leaders" id="hitsLeaders">
                                <li class="loading">Loading...</li>
                            </ul>
                        </div>
                        <div class="stat-box">
                            <div class="stat-header">Home Runs</div>
                            <ul class="stat-leaders" id="hrLeaders">
                                <li class="loading">Loading...</li>
                            </ul>
                        </div>
                        <div class="stat-box">
                            <div class="stat-header">RBI</div>
                            <ul class="stat-leaders" id="rbiLeaders">
                                <li class="loading">Loading...</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Pitching Leaders -->
                <div class="leaders-category">
                    <h2 class="category-title">Pitching Leaders</h2>
                    <div class="stat-boxes">
                        <div class="stat-box">
                            <div class="stat-header">ERA</div>
                            <ul class="stat-leaders" id="eraLeaders">
                                <li class="loading">Loading...</li>
                            </ul>
                        </div>
                        <div class="stat-box">
                            <div class="stat-header">WHIP</div>
                            <ul class="stat-leaders" id="whipLeaders">
                                <li class="loading">Loading...</li>
                            </ul>
                        </div>
                        <div class="stat-box">
                            <div class="stat-header">Strikeouts</div>
                            <ul class="stat-leaders" id="kLeaders">
                                <li class="loading">Loading...</li>
                            </ul>
                        </div>
                        <div class="stat-box">
                            <div class="stat-header">Innings Pitched</div>
                            <ul class="stat-leaders" id="ipLeaders">
                                <li class="loading">Loading...</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section class="about-section" onclick="window.location.href='/about'">
            <div class="about-content">
                <h2>About yakyuu.jp</h2>
                <p>
                    yakyuu.jp was created in 2025 with the goal of fulfilling three important qualities:
                    comprehensiveness, accuracy, and ease-of-use. yakyuu.jp is the only resource that provides integrated
                    player, game, and team pages with advanced statistics, splits, and play-by-play data, as well as automated FIP and wOBA constants, dynamic qualifiers, and regressed park factors.
                </p>
                <p>
                    All data is sourced directly from official NPB sources and updated regularly.
                </p>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="main-footer">
        <div class="footer-content">
            <p>&copy; 2025 yakyuu.jp</p>
            <p>This website is not affiliated with Nippon Professional Baseball (NPB) or any of its teams.</p>
            <p> Created by Lukas Pluckhahn (lukas@yakyuu.jp).</p>
        </div>
    </footer>

    <script>
        // API Configuration
        const API_BASE = window.location.protocol === 'file:' ? 'http://localhost:5000/api' : '/api';
        
        // Load all sections on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadDatabaseStats();
            loadStandings();
            loadRecentGames();
            loadLeagueLeaders();
        });
        
        // Load database statistics for the hero section
        async function loadDatabaseStats() {
            try {
                console.log('Loading database stats...');
                
                // Load player count
                const playersResponse = await fetch(`${API_BASE}/players/count`);
                console.log('Players response:', playersResponse.status);
                if (playersResponse.ok) {
                    const playersData = await playersResponse.json();
                    console.log('Players data:', playersData);
                    const statElements = document.querySelectorAll('.stat-number');
                    if (statElements.length > 0) {
                        statElements[0].textContent = playersData.count.toLocaleString();
                    }
                } else {
                    console.error('Players API failed:', playersResponse.status);
                }
                
                // Load game count
                const gamesResponse = await fetch(`${API_BASE}/games/count`);
                console.log('Games response:', gamesResponse.status);
                if (gamesResponse.ok) {
                    const gamesData = await gamesResponse.json();
                    console.log('Games data:', gamesData);
                    const statElements = document.querySelectorAll('.stat-number');
                    if (statElements.length > 1) {
                        statElements[1].textContent = gamesData.count.toLocaleString();
                    }
                } else {
                    console.error('Games API failed:', gamesResponse.status);
                }
                
                // Load event files count - let's get actual count from API
                try {
                    const eventsResponse = await fetch(`${API_BASE}/events/count`);
                    if (eventsResponse.ok) {
                        const eventsData = await eventsResponse.json();
                        const statElements = document.querySelectorAll('.stat-number');
                        if (statElements.length > 2) {
                            statElements[2].textContent = eventsData.count.toLocaleString();
                        }
                    } else {
                        // Fallback to placeholder if API doesn't exist
                        const statElements = document.querySelectorAll('.stat-number');
                        if (statElements.length > 2) {
                            statElements[2].textContent = '500,000';
                        }
                    }
                } catch (error) {
                    console.log('Events count API not available, using placeholder');
                    const statElements = document.querySelectorAll('.stat-number');
                    if (statElements.length > 2) {
                        statElements[2].textContent = '500,000';
                    }
                }
                
            } catch (error) {
                console.error('Error loading database stats:', error);
                // Keep default values if API calls fail
            }
        }
        
        // Load standings data for current season
        async function loadStandings() {
            try {
                console.log('Loading standings...');
                const response = await fetch(`${API_BASE}/standings`);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                console.log('Standings data:', data);
                
                // Populate Central League
                populateStandings('central', data.central_league);
                
                // Populate Pacific League
                populateStandings('pacific', data.pacific_league);
                
            } catch (error) {
                console.error('Error loading standings:', error);
                showError('central', 'Failed to load Central League standings');
                showError('pacific', 'Failed to load Pacific League standings');
            }
        }

        function populateStandings(league, teams) {
            const loadingEl = document.getElementById(`${league}-standings-loading`);
            const tableEl = document.getElementById(`${league}-standings-table`);
            const bodyEl = document.getElementById(`${league}-standings-body`);
            
            // Hide loading
            loadingEl.style.display = 'none';
            
            if (!teams || teams.length === 0) {
                showError(league, 'No standings data available');
                return;
            }
            
            // Sort teams by win percentage (descending) - just to be sure
            teams.sort((a, b) => b.win_pct - a.win_pct);
            
            // Recalculate games behind after sorting
            if (teams.length > 0) {
                const leader = teams[0];
                teams.forEach((team, index) => {
                    if (index === 0) {
                        team.games_behind = 0.0;
                    } else {
                        const gb = ((leader.wins - team.wins) + (team.losses - leader.losses)) / 2;
                        team.games_behind = Math.round(gb * 10) / 10; // Round to 1 decimal
                    }
                });
            }
            
            // Clear existing rows
            bodyEl.innerHTML = '';
            
            // Add team rows
            teams.forEach((team, index) => {
                const row = document.createElement('tr');
                
                // Format games behind
                let gbDisplay = team.games_behind === 0 ? '—' : team.games_behind.toString();
                
                // Team name display (English only for better readability)
                const teamDisplayName = team.team_name_en || team.team_name;
                
                row.innerHTML = `
                    <td class="place-number">${index + 1}</td>
                    <td><a href="/teams/${team.team_id}" class="team-name">${teamDisplayName}</a></td>
                    <td>${team.games}</td>
                    <td>${team.wins}</td>
                    <td>${team.losses}</td>
                    <td>${team.ties}</td>
                    <td class="win-pct">${team.win_pct.toFixed(3)}</td>
                    <td class="games-behind">${gbDisplay}</td>
                `;
                
                bodyEl.appendChild(row);
            });
            
            // Show table
            tableEl.style.display = 'table';
        }

        function showError(league, message) {
            const loadingEl = document.getElementById(`${league}-standings-loading`);
            const errorEl = document.getElementById(`${league}-standings-error`);
            
            loadingEl.style.display = 'none';
            errorEl.textContent = message;
            errorEl.style.display = 'block';
        }
        
        // Load recent games (from games.html)
        async function loadRecentGames() {
            const containerEl = document.getElementById('recent-games-container');
            const loadingEl = document.getElementById('recent-games-loading');
            const errorEl = document.getElementById('recent-games-error');
            
            // Show loading state
            loadingEl.style.display = 'block';
            errorEl.style.display = 'none';
            containerEl.style.display = 'none';
            
            // Build API URL for recent games
            let apiUrl = `${API_BASE}/recent-games`;
            
            // Fetch games
            fetch(apiUrl)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Failed to fetch games');
                    }
                    return response.json();
                })
                .then(data => {
                    // Hide loading state
                    loadingEl.style.display = 'none';
                    
                    if (data.games && data.games.length > 0) {
                        // Show container and populate data
                        containerEl.style.display = 'grid';
                        populateRecentGamesCards(data.games.slice(0, 6)); // Show only 6 games
                    } else {
                        // Show no games message
                        containerEl.innerHTML = `<div style="text-align: center; padding: 2rem; color: #666; grid-column: 1 / -1;">No recent games found</div>`;
                        containerEl.style.display = 'grid';
                    }
                })
                .catch(error => {
                    console.error('Error loading games:', error);
                    loadingEl.style.display = 'none';
                    errorEl.style.display = 'block';
                });
        }
        
        function populateRecentGamesCards(games) {
            const container = document.getElementById('recent-games-container');
            container.innerHTML = '';
            
            games.forEach(game => {
                const gameCard = document.createElement('div');
                gameCard.className = 'game-card';
                
                // Format date as yyyy/mm/dd - avoid timezone issues by parsing manually
                const dateParts = game.date.split('-');
                const date = `${dateParts[0]}/${dateParts[1]}/${dateParts[2]}`;
                
                // Use the enhanced API data structure
                const homeTeam = game.home_team || 'Home Team';
                const awayTeam = game.away_team || 'Away Team';
                const homeRuns = game.home_runs || 0;
                const awayRuns = game.visitor_runs || 0;
                const homeHits = game.home_hits || 0;
                const awayHits = game.visitor_hits || 0;
                const homeErrors = game.home_errors || 0;
                const awayErrors = game.visitor_errors || 0;
                
                // Determine winning team styling
                const homeScoreClass = homeRuns > awayRuns ? 'winning-score' : '';
                const awayScoreClass = awayRuns > homeRuns ? 'winning-score' : '';
                
                // Don't show game type for regular season games
                const gameTypeDisplay = '';
                
                // Format ballpark info
                const ballparkDisplay = game.ballpark || '';
                
                // Create the game info header with Date | Game Number | Park Name (EN)
                const gameNumber = game.game_number ? ` | Game ${game.game_number}` : '';
                const ballparkEn = game.ballpark_en || ballparkDisplay;
                const gameInfoHeader = `${date}${gameNumber}${ballparkEn ? ' | ' + ballparkEn : ''}`;
                
                gameCard.innerHTML = `
                    <table class="game-line-score">
                        <thead>
                            <tr>
                                <th colspan="4" class="game-info-header">${gameInfoHeader}</th>
                            </tr>
                            <tr>
                                <th>Team</th>
                                <th>R</th>
                                <th>H</th>
                                <th>E</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="team-name">${awayTeam}</td>
                                <td class="${awayScoreClass}">${awayRuns}</td>
                                <td>${awayHits}</td>
                                <td>${awayErrors}</td>
                            </tr>
                            <tr>
                                <td class="team-name">${homeTeam}</td>
                                <td class="${homeScoreClass}">${homeRuns}</td>
                                <td>${homeHits}</td>
                                <td>${homeErrors}</td>
                            </tr>
                        </tbody>
                    </table>
                `;
                
                // Add click handler to navigate to game page
                gameCard.addEventListener('click', function() {
                    window.location.href = `/games/${game.game_id}`;
                });
                
                container.appendChild(gameCard);
            });
        }
        
        // Load league leaders (exact copy from players.html)
        function loadLeagueLeaders() {
            console.log('Loading league leaders...');
            fetch(`${API_BASE}/league-leaders`)
                .then(response => {
                    console.log('Response status:', response.status);
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    console.log('League leaders data:', data);
                    displayLeaders('avgLeaders', data.batting_leaders.avg || []);
                    displayLeaders('hitsLeaders', data.batting_leaders.hits || []);
                    displayLeaders('hrLeaders', data.batting_leaders.hr || []);
                    displayLeaders('rbiLeaders', data.batting_leaders.rbi || []);
                    displayLeaders('eraLeaders', data.pitching_leaders.era || []);
                    displayLeaders('whipLeaders', data.pitching_leaders.whip || []);
                    displayLeaders('kLeaders', data.pitching_leaders.k || []);
                    displayLeaders('ipLeaders', data.pitching_leaders.ip || []);
                })
                .catch(error => {
                    console.error('League leaders error:', error);
                    // Show error in all leader boxes
                    const leaderBoxes = ['avgLeaders', 'hitsLeaders', 'hrLeaders', 'rbiLeaders', 'eraLeaders', 'whipLeaders', 'kLeaders', 'ipLeaders'];
                    leaderBoxes.forEach(boxId => {
                        document.getElementById(boxId).innerHTML = '<li class="error">Failed to load</li>';
                    });
                });
        }
        
        function displayLeaders(elementId, leaders) {
            const element = document.getElementById(elementId);
            
            if (!element) {
                console.error(`Element with id '${elementId}' not found`);
                return;
            }
            
            if (!leaders || leaders.length === 0) {
                element.innerHTML = '<li class="error">No data available</li>';
                return;
            }
            
            console.log(`Displaying ${leaders.length} leaders for ${elementId}:`, leaders);
            
            const html = leaders.map(leader => `
                <li class="stat-leader" onclick="window.location.href='/players/${leader.player_id}'">
                    <span class="leader-name">${leader.name}</span>
                    <span class="leader-stat">${leader.stat}</span>
                </li>
            `).join('');
            
            element.innerHTML = html;
        }
    </script>
</body>
</html>